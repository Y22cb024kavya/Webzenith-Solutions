{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/env.ts"],"sourcesContent":["import { createEnv } from \"@t3-oss/env-nextjs\";\r\nimport { z } from \"zod\";\r\n\r\nexport const env = createEnv({\r\n  server: {},\r\n  client: {\r\n    NEXT_PUBLIC_SUPABASE_URL: z.string().url(),\r\n    NEXT_PUBLIC_SUPABASE_ANON_KEY: z.string().min(1),\r\n  },\r\n  runtimeEnv: {\r\n    NEXT_PUBLIC_SUPABASE_URL: process.env.NEXT_PUBLIC_SUPABASE_URL,\r\n    NEXT_PUBLIC_SUPABASE_ANON_KEY: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\r\n  },\r\n});"],"names":[],"mappings":";;;;AAU8B;AAV9B;AACA;;;AAEO,MAAM,MAAM,IAAA,qSAAS,EAAC;IAC3B,QAAQ,CAAC;IACT,QAAQ;QACN,0BAA0B,sOAAC,CAAC,MAAM,GAAG,GAAG;QACxC,+BAA+B,sOAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IAChD;IACA,YAAY;QACV,wBAAwB;QACxB,6BAA6B;IAC/B;AACF","debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/utils/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\r\nimport { env } from \"@/env\";\r\n\r\nexport function createClient() {\r\n  return createBrowserClient(\r\n    env.NEXT_PUBLIC_SUPABASE_URL,\r\n    env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,SAAS;IACd,OAAO,IAAA,iTAAmB,EACxB,4HAAG,CAAC,wBAAwB,EAC5B,4HAAG,CAAC,6BAA6B;AAErC","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,0SAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,0SAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,0SAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,0SAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,0SAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QAAI,KAAK;QAAK,WAAW,IAAA,oIAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,0SAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"grid place-content-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,0SAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC,sYAAsB;QACrB,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,4UACA;QAED,GAAG,KAAK;kBAET,cAAA,4TAAC,2YAA2B;YAC1B,WAAW,IAAA,oIAAE,EAAC;sBAEd,cAAA,4TAAC,oSAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,sYAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,0SAAgB,MAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QAAI,WAAU;kBACb,cAAA,4TAAC;YACC,KAAK;YACL,WAAW,IAAA,oIAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,0SAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QAAM,KAAK;QAAK,WAAW,IAAA,oIAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,0SAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,0SAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,0SAAgB,OAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,0SAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,oGACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,0SAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EAAC,kDAAkD;QAC/D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,0SAAgB,QAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC;QACC,KAAK;QACL,WAAW,IAAA,oIAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,0SAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC,uYAAqB;QACpB,WAAW,IAAA,oIAAE,EACX,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,4TAAC,wYAAsB;YACrB,WAAW,IAAA,oIAAE,EACX;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,uYAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,qPAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,4TAAC;QAAI,WAAW,IAAA,oIAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,0SAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,4TAAC;QACC,MAAM;QACN,WAAW,IAAA,oIAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/app/admin/permission-matrix.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from \"react\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Switch } from \"@/components/ui/switch\"; \r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Input } from \"@/components/ui/input\"; // <--- NEW\r\nimport { Pencil, Check, X } from \"lucide-react\"; // <--- NEW ICONS\r\n\r\ntype Props = {\r\n  roles: any[];\r\n  permissions: any[];\r\n  existingAssignments: any[];\r\n  onToggle: (roleId: string, permId: string, isChecked: boolean) => void; \r\n  onRoleStatusChange: (roleId: string, status: boolean) => void;\r\n  onRenameRole: (roleId: string, newName: string) => void; // <--- NEW PROP\r\n};\r\n\r\nexport default function PermissionMatrix({ \r\n  roles, \r\n  permissions, \r\n  existingAssignments, \r\n  onToggle, \r\n  onRoleStatusChange,\r\n  onRenameRole\r\n}: Props) {\r\n  \r\n  // Track which role is currently being edited\r\n  const [editingRoleId, setEditingRoleId] = useState<string | null>(null);\r\n  const [tempName, setTempName] = useState(\"\");\r\n\r\n  const startEditing = (role: any) => {\r\n    setEditingRoleId(role.id);\r\n    setTempName(role.name);\r\n  };\r\n\r\n  const saveName = () => {\r\n    if (editingRoleId && tempName.trim()) {\r\n      onRenameRole(editingRoleId, tempName);\r\n    }\r\n    setEditingRoleId(null);\r\n  };\r\n\r\n  const cancelEditing = () => {\r\n    setEditingRoleId(null);\r\n  };\r\n\r\n  const isAssigned = (roleId: string, permId: string) => {\r\n    return existingAssignments.some(a => a.role_id === roleId && a.permission_id === permId);\r\n  };\r\n\r\n  return (\r\n    <div className=\"border rounded-lg overflow-hidden\">\r\n      <Table>\r\n        <TableHeader>\r\n          <TableRow className=\"bg-slate-100\">\r\n            <TableHead className=\"w-[200px] font-bold\">Permission</TableHead>\r\n            {roles.map(role => (\r\n              <TableHead key={role.id} className=\"text-center min-w-[160px]\">\r\n                <div className=\"flex flex-col items-center gap-2 py-2\">\r\n                  \r\n                  {/* EDITABLE NAME SECTION */}\r\n                  {editingRoleId === role.id ? (\r\n                    <div className=\"flex items-center gap-1 animate-in fade-in zoom-in duration-200\">\r\n                      <Input \r\n                        value={tempName} \r\n                        onChange={(e) => setTempName(e.target.value)} \r\n                        className=\"h-7 text-xs w-24 px-1 bg-white\"\r\n                        autoFocus\r\n                        onKeyDown={(e) => {\r\n                          if (e.key === 'Enter') saveName();\r\n                          if (e.key === 'Escape') cancelEditing();\r\n                        }}\r\n                      />\r\n                      <button onClick={saveName} className=\"text-green-600 hover:text-green-700\"><Check className=\"w-4 h-4\" /></button>\r\n                      <button onClick={cancelEditing} className=\"text-red-500 hover:text-red-600\"><X className=\"w-4 h-4\" /></button>\r\n                    </div>\r\n                  ) : (\r\n                    <div \r\n                      className=\"flex items-center gap-2 group cursor-pointer hover:bg-slate-200/50 px-2 py-1 rounded transition-colors\"\r\n                      onClick={() => startEditing(role)}\r\n                    >\r\n                      <span className={`font-bold ${role.is_enabled ? 'text-black' : 'text-slate-400'}`}>\r\n                        {role.name}\r\n                      </span>\r\n                      <Pencil className=\"w-3 h-3 text-slate-400 opacity-0 group-hover:opacity-100\" />\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {/* ENABLE/DISABLE TOGGLE */}\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Switch \r\n                      checked={role.is_enabled} \r\n                      onCheckedChange={(checked) => onRoleStatusChange(role.id, checked)}\r\n                      className=\"scale-75\" \r\n                    />\r\n                    {!role.is_enabled && <Badge variant=\"destructive\" className=\"text-[10px] px-1 h-4\">Disabled</Badge>}\r\n                  </div>\r\n                </div>\r\n              </TableHead>\r\n            ))}\r\n          </TableRow>\r\n        </TableHeader>\r\n        <TableBody>\r\n          {permissions.map(perm => (\r\n            <TableRow key={perm.id}>\r\n              <TableCell className=\"font-medium text-slate-600\">\r\n                {perm.slug}\r\n              </TableCell>\r\n              {roles.map(role => (\r\n                <TableCell key={role.id} className=\"text-center p-0\">\r\n                  <div className=\"flex justify-center py-4\">\r\n                    <Checkbox \r\n                      checked={isAssigned(role.id, perm.id)}\r\n                      onCheckedChange={(checked) => onToggle(role.id, perm.id, checked as boolean)}\r\n                      disabled={!role.is_enabled} \r\n                    />\r\n                  </div>\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 737, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,OAAO,wYAAkB;AAE/B,MAAM,yBAAW,0SAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC,wYAAkB;QACjB,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,wYAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,0SAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC,2YAAqB;QACpB,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,uYACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,2YAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,0SAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC,2YAAqB;QACpB,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,2YAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 805, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,uYAAoB;AAEnC,MAAM,cAAc,wYAAqB;AAEzC,MAAM,cAAc,wYAAqB;AAEzC,MAAM,8BAAgB,0SAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,4TAAC,0YAAuB;QACtB,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,0TACA;QAED,GAAG,KAAK;;YAER;0BACD,4TAAC,uYAAoB;gBAAC,OAAO;0BAC3B,cAAA,4TAAC,0TAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,0YAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,0SAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC,iZAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,4TAAC,oTAAS;YAAC,WAAU;;;;;;;;;;;MAZnB;AAeN,qBAAqB,WAAW,GAAG,iZAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,0SAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC,mZAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,4TAAC,0TAAW;YAAC,WAAU;;;;;;;;;;;MAZrB;AAeN,uBAAuB,WAAW,GAChC,mZAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,0SAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,4TAAC,yYAAsB;kBACrB,cAAA,4TAAC,0YAAuB;YACtB,KAAK;YACL,WAAW,IAAA,oIAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,4TAAC;;;;;8BACD,4TAAC,2YAAwB;oBACvB,WAAW,IAAA,oIAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,4TAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,0YAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,0SAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC,wYAAqB;QACpB,KAAK;QACL,WAAW,IAAA,oIAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,wYAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,0SAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,4TAAC,uYAAoB;QACnB,KAAK;QACL,WAAW,IAAA,oIAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,4TAAC;gBAAK,WAAU;0BACd,cAAA,4TAAC,gZAA6B;8BAC5B,cAAA,4TAAC,oSAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,4TAAC,2YAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,uYAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,0SAAgB,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,4TAAC,4YAAyB;QACxB,KAAK;QACL,WAAW,IAAA,oIAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG,4YAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1028, "column": 0}, "map": {"version":3,"sources":["file:///D:/rbac-system/apps/web/app/admin/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { createClient } from \"@/utils/supabase/client\"; // Real DB Client\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport PermissionMatrix from \"./permission-matrix\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Plus, User, Loader2 } from \"lucide-react\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function AdminPage() {\r\n  const supabase = createClient();\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Real Data State\r\n  const [roles, setRoles] = useState<any[]>([]);\r\n  const [permissions, setPermissions] = useState<any[]>([]);\r\n  const [assignments, setAssignments] = useState<any[]>([]);\r\n  const [users, setUsers] = useState<any[]>([]);\r\n\r\n  // 1. FETCH REAL DATA ON LOAD\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      \r\n      // Fetch Roles, Permissions, and Assignments\r\n      const { data: rolesData } = await supabase.from('roles').select('*').order('name');\r\n      const { data: permData } = await supabase.from('permissions').select('*').order('slug');\r\n      const { data: assignData } = await supabase.from('role_permissions').select('*');\r\n      \r\n      // Fetch Users who have roles assigned\r\n      // (Note: Supabase security prevents listing ALL auth users easily from client, \r\n      // so we list everyone present in the public.user_roles table)\r\n      const { data: userData } = await supabase.from('user_roles').select('user_id, role_id');\r\n\r\n      setRoles(rolesData || []);\r\n      setPermissions(permData || []);\r\n      setAssignments(assignData || []);\r\n      \r\n      // Map user_roles to a friendly format\r\n      // In a real app, you'd join this with a profiles table to get emails.\r\n      // For now, we mock the email display or show the ID.\r\n      const mappedUsers = userData?.map(u => ({\r\n        id: u.user_id,\r\n        // If it's you, show your email, otherwise show ID\r\n        email: u.user_id, \r\n        role_id: u.role_id\r\n      })) || [];\r\n      \r\n      setUsers(mappedUsers);\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  // 2. REAL DB ACTION: Toggle Permission\r\n  const handleToggle = async (roleId: string, permId: string, isChecked: boolean) => {\r\n    // Optimistic Update (Update UI immediately)\r\n    if (isChecked) {\r\n      setAssignments([...assignments, { role_id: roleId, permission_id: permId }]);\r\n      await supabase.from('role_permissions').insert({ role_id: roleId, permission_id: permId });\r\n    } else {\r\n      setAssignments(assignments.filter(a => !(a.role_id === roleId && a.permission_id === permId)));\r\n      await supabase.from('role_permissions').delete().match({ role_id: roleId, permission_id: permId });\r\n    }\r\n    router.refresh();\r\n  };\r\n\r\n  // 3. REAL DB ACTION: Assign Role\r\n  const handleAssignRole = async (userId: string, newRoleId: string) => {\r\n    // Optimistic Update\r\n    setUsers(users.map(u => u.id === userId ? { ...u, role_id: newRoleId } : u));\r\n\r\n    // Update DB (Upsert handles both insert and update)\r\n    const { error } = await supabase\r\n      .from('user_roles')\r\n      .upsert({ user_id: userId, role_id: newRoleId }, { onConflict: 'user_id' });\r\n\r\n    if (error) {\r\n      console.error(\"Failed to update role:\", error.message);\r\n      alert(\"Error updating role in database\");\r\n    } else {\r\n      console.log(\"Role updated successfully\");\r\n      router.refresh(); // Refresh server components to pick up the change\r\n    }\r\n  };\r\n\r\n  // 4. REAL DB ACTION: Create Role\r\n  const handleCreateRole = async () => {\r\n    const roleName = window.prompt(\"Enter new role name:\");\r\n    if (!roleName) return;\r\n\r\n    const { data, error } = await supabase.from('roles').insert({ name: roleName }).select().single();\r\n    if (data) setRoles([...roles, data]);\r\n    if (error) alert(\"Error creating role: \" + error.message);\r\n  };\r\n\r\n  // 5. REAL DB ACTION: Rename Role\r\n  const handleRenameRole = async (roleId: string, newName: string) => {\r\n    setRoles(roles.map(r => r.id === roleId ? { ...r, name: newName } : r));\r\n    await supabase.from('roles').update({ name: newName }).eq('id', roleId);\r\n  };\r\n\r\n  // 6. REAL DB ACTION: Disable Role\r\n  const handleRoleStatus = async (roleId: string, status: boolean) => {\r\n    setRoles(roles.map(r => r.id === roleId ? { ...r, is_enabled: status } : r));\r\n    await supabase.from('roles').update({ is_enabled: status }).eq('id', roleId);\r\n  };\r\n\r\n  if (loading) return <div className=\"flex h-screen items-center justify-center\"><Loader2 className=\"animate-spin\" /></div>;\r\n\r\n  return (\r\n    <div className=\"p-8 max-w-[1400px] mx-auto\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <h1 className=\"text-3xl font-bold tracking-tight\">Access Control</h1>\r\n          <Badge className=\"bg-green-600 text-white hover:bg-green-700\">Live Database Mode</Badge>\r\n        </div>\r\n      </div>\r\n\r\n      <Tabs defaultValue=\"matrix\" className=\"w-full\">\r\n        <TabsList className=\"mb-4\">\r\n          <TabsTrigger value=\"matrix\">Role Matrix</TabsTrigger>\r\n          <TabsTrigger value=\"users\">User Management</TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"matrix\">\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between\">\r\n              <div>\r\n                <CardTitle>Role-Permission Matrix</CardTitle>\r\n                <CardDescription>Manage what each role can do.</CardDescription>\r\n              </div>\r\n              <Button onClick={handleCreateRole} size=\"sm\" className=\"gap-2\">\r\n                <Plus className=\"w-4 h-4\" /> Create Role\r\n              </Button>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <PermissionMatrix \r\n                roles={roles} \r\n                permissions={permissions} \r\n                existingAssignments={assignments}\r\n                onToggle={handleToggle}\r\n                onRoleStatusChange={handleRoleStatus}\r\n                onRenameRole={handleRenameRole}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"users\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>User Assignment</CardTitle>\r\n              <CardDescription>Assign roles to registered users.</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"border rounded-lg\">\r\n                {users.map((user) => (\r\n                  <div key={user.id} className=\"flex items-center justify-between p-4 border-b last:border-0 hover:bg-slate-50\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center font-bold text-slate-600\">\r\n                        U\r\n                      </div>\r\n                      <div className=\"flex flex-col\">\r\n                        {/* In real mode we mostly see IDs unless we join profiles */}\r\n                        <span className=\"font-mono text-xs text-slate-500\">{user.id}</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <span className=\"text-sm text-muted-foreground mr-2\">Assigned Role:</span>\r\n                      <Select \r\n                        value={user.role_id || \"unassigned\"} \r\n                        onValueChange={(val) => handleAssignRole(user.id, val)}\r\n                      >\r\n                        <SelectTrigger className=\"w-[180px]\">\r\n                          <SelectValue placeholder=\"Select a role\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                          {roles.map(r => (\r\n                            <SelectItem key={r.id} value={r.id}>\r\n                              {r.name} {!r.is_enabled && \"(Disabled)\"}\r\n                            </SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}